import { convertToParamMap } from '@angular/router';
import { isObservable, of } from 'rxjs';
/** @internal */
// tslint:disable-next-line:triple-equals
export const LOOSE_IDENTITY_COMPARATOR = (a, b) => a == b;
/** @internal */
export const NOP = () => { };
/** @internal */
export function isMissing(obj) {
    return obj === undefined || obj === null;
}
/** @internal */
export function undefinedToNull(obj) {
    if (obj === undefined) {
        return null;
    }
    return obj;
}
/** @internal */
export function isPresent(obj) {
    return !isMissing(obj);
}
/** @internal */
export function isFunction(obj) {
    return isPresent(obj) && typeof obj === 'function';
}
/** @internal */
export function wrapTryCatch(fn, msg) {
    return function () {
        try {
            return fn.apply(this, arguments);
        }
        catch (err) {
            console.error(msg, err);
            return null;
        }
    };
}
/** @internal */
export function areEqualUsing(first, second, comparator) {
    const comparison = comparator(first, second);
    if (typeof comparison === 'boolean') {
        return comparison;
    }
    return comparison === 0;
}
/** @internal */
export function filterParamMap(paramMap, keys) {
    const params = {};
    keys
        .filter(key => paramMap.keys.includes(key))
        .forEach(key => params[key] = paramMap.getAll(key));
    return convertToParamMap(params);
}
/** @internal */
export function compareParamMaps(first, second) {
    if ((first && !second) || (second && !first)) {
        return false;
    }
    if (!compareStringArraysUnordered(first.keys, second.keys)) {
        return false;
    }
    return first.keys.every(key => compareStringArraysUnordered(first.getAll(key), second.getAll(key)));
}
/** @internal */
export function compareStringArraysUnordered(first, second) {
    if (!first && !second) {
        return true;
    }
    if ((first && !second) || (second && !first)) {
        return false;
    }
    if (first.length !== second.length) {
        return false;
    }
    const sortedFirst = first.sort();
    const sortedSecond = second.sort();
    return sortedFirst.every((firstKey, index) => firstKey === sortedSecond[index]);
}
/** @internal */
export function wrapIntoObservable(input) {
    if (isObservable(input)) {
        return input;
    }
    return of(input);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25ncXAvY29yZS9zcmMvbGliL3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGlCQUFpQixFQUFvQixNQUFNLGlCQUFpQixDQUFDO0FBQ3RFLE9BQU8sRUFBRSxZQUFZLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBR3BELGdCQUFnQjtBQUNoQix5Q0FBeUM7QUFDekMsTUFBTSxDQUFDLE1BQU0seUJBQXlCLEdBQUcsQ0FBSSxDQUFJLEVBQUUsQ0FBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBRW5FLGdCQUFnQjtBQUNoQixNQUFNLENBQUMsTUFBTSxHQUFHLEdBQWEsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFDO0FBRXRDLGdCQUFnQjtBQUNoQixNQUFNLFVBQVUsU0FBUyxDQUFDLEdBQVE7SUFDOUIsT0FBTyxHQUFHLEtBQUssU0FBUyxJQUFJLEdBQUcsS0FBSyxJQUFJLENBQUM7QUFDN0MsQ0FBQztBQUVELGdCQUFnQjtBQUNoQixNQUFNLFVBQVUsZUFBZSxDQUFJLEdBQWtCO0lBQ2pELElBQUksR0FBRyxLQUFLLFNBQVMsRUFBRSxDQUFDO1FBQ3BCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNmLENBQUM7QUFFRCxnQkFBZ0I7QUFDaEIsTUFBTSxVQUFVLFNBQVMsQ0FBSSxHQUFNO0lBQy9CLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0IsQ0FBQztBQUVELGdCQUFnQjtBQUNoQixNQUFNLFVBQVUsVUFBVSxDQUFDLEdBQVE7SUFDL0IsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksT0FBTyxHQUFHLEtBQUssVUFBVSxDQUFDO0FBQ3ZELENBQUM7QUFFRCxnQkFBZ0I7QUFDaEIsTUFBTSxVQUFVLFlB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QztBQUVELGdCQUFnQjtBQUNoQixNQUFNLFVBQVUsa0JBQWtCLENBQUksS0FBd0I7SUFDMUQsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN0QixPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRUQsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDckIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnZlcnRUb1BhcmFtTWFwLCBQYXJhbU1hcCwgUGFyYW1zIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHsgaXNPYnNlcnZhYmxlLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBDb21wYXJhdG9yIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXHJcbmV4cG9ydCBjb25zdCBMT09TRV9JREVOVElUWV9DT01QQVJBVE9SID0gPFQ+KGE6IFQsIGI6IFQpID0+IGEgPT0gYjtcclxuXHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZXhwb3J0IGNvbnN0IE5PUDogRnVuY3Rpb24gPSAoKSA9PiB7fTtcclxuXHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTWlzc2luZyhvYmo6IGFueSk6IG9iaiBpcyBudWxsIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiBvYmogPT09IHVuZGVmaW5lZCB8fCBvYmogPT09IG51bGw7XHJcbn1cclxuXHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVuZGVmaW5lZFRvTnVsbDxUPihvYmo6IFQgfCB1bmRlZmluZWQpOiBUIHwgbnVsbCB7XHJcbiAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ByZXNlbnQ8VD4ob2JqOiBUKTogb2JqIGlzIEV4Y2x1ZGU8VCwgbnVsbCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgcmV0dXJuICFpc01pc3Npbmcob2JqKTtcclxufVxyXG5cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbihvYmo6IGFueSk6IG9iaiBpcyBGdW5jdGlvbiB7XHJcbiAgICByZXR1cm4gaXNQcmVzZW50KG9iaikgJiYgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJztcclxufVxyXG5cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gd3JhcFRyeUNhdGNoPFQgZXh0ZW5kcyBGdW5jdGlvbj4oZm46IFQsIG1zZzogc3RyaW5nKTogVCB7XHJcbiAgICByZXR1cm4gPGFueT5mdW5jdGlvbiAodGhpczogYW55KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobXNnLCBlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbFVzaW5nPFQ+KGZpcnN0OiBUIHwgbnVsbCwgc2Vjb25kOiBUIHwgbnVsbCwgY29tcGFyYXRvcjogQ29tcGFyYXRvcjxUIHwgbnVsbD4pOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGNvbXBhcmlzb24gPSBjb21wYXJhdG9yKGZpcnN0LCBzZWNvbmQpO1xyXG4gICAgaWYgKHR5cGVvZiBjb21wYXJpc29uID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICByZXR1cm4gY29tcGFyaXNvbjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29tcGFyaXNvbiA9PT0gMDtcclxufVxyXG5cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyUGFyYW1NYXAocGFyYW1NYXA6IFBhcmFtTWFwLCBrZXlzOiBzdHJpbmdbXSk6IFBhcmFtTWFwIHtcclxuICAgIGNvbnN0IHBhcmFtczogUGFyYW1zID0ge307XHJcbiAgICBrZXlzXHJcbiAgICAgICAgLmZpbHRlcihrZXkgPT4gcGFyYW1NYXAua2V5cy5pbmNsdWRlcyhrZXkpKVxyXG4gICAgICAgIC5mb3JFYWNoKGtleSA9PiBwYXJhbXNbIGtleSBdID0gcGFyYW1NYXAuZ2V0QWxsKGtleSkpO1xyXG5cclxuICAgIHJldHVybiBjb252ZXJ0VG9QYXJhbU1hcChwYXJhbXMpO1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUGFyYW1NYXBzKGZpcnN0OiBQYXJhbU1hcCwgc2Vjb25kOiBQYXJhbU1hcCk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKChmaXJzdCAmJiAhc2Vjb25kKSB8fCAoc2Vjb25kICYmICFmaXJzdCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFjb21wYXJlU3RyaW5nQXJyYXlzVW5vcmRlcmVkKGZpcnN0LmtleXMsIHNlY29uZC5rZXlzKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmlyc3Qua2V5cy5ldmVyeShrZXkgPT5cclxuICAgICAgICBjb21wYXJlU3RyaW5nQXJyYXlzVW5vcmRlcmVkKGZpcnN0LmdldEFsbChrZXkpLCBzZWNvbmQuZ2V0QWxsKGtleSkpXHJcbiAgICApO1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlU3RyaW5nQXJyYXlzVW5vcmRlcmVkKGZpcnN0OiBzdHJpbmdbXSwgc2Vjb25kOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCFmaXJzdCAmJiAhc2Vjb25kKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKChmaXJzdCAmJiAhc2Vjb25kKSB8fCAoc2Vjb25kICYmICFmaXJzdCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZpcnN0Lmxlbmd0aCAhPT0gc2Vjb25kLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzb3J0ZWRGaXJzdCA9IGZpcnN0LnNvcnQoKTtcclxuICAgIGNvbnN0IHNvcnRlZFNlY29uZCA9IHNlY29uZC5zb3J0KCk7XHJcbiAgICByZXR1cm4gc29ydGVkRmlyc3QuZXZlcnkoKGZpcnN0S2V5LCBpbmRleCkgPT4gZmlyc3RLZXkgPT09IHNvcnRlZFNlY29uZFtpbmRleF0pO1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiB3cmFwSW50b09ic2VydmFibGU8VD4oaW5wdXQ6IFQgfCBPYnNlcnZhYmxlPFQ+KTogT2JzZXJ2YWJsZTxUPiB7XHJcbiAgICBpZiAoaXNPYnNlcnZhYmxlKGlucHV0KSkge1xyXG4gICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb2YoaW5wdXQpO1xyXG59Il19